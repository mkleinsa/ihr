---
title: "Getting Started in ihr"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting Started in ihr}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(ihr)
```



# Example Datasets
The ihr package includes two datasets: example_heart_1, and example_heart_5. The one subject data is simply the first subject of the five subject data. 

## Example data for 1 subject

Example data with 1 subject can be loaded with:

```{r}
data("example_data_1")
```
  
This dataset contains 154104 observations of 3 columns corresponding to the three components listed in the introduction:

* `"id"` - Factor (character string) column for subject identification
* `"time"` - POSIXct column for datetime values
* `"hr"` - Numeric column for heart rate
Data used with ihr functions may have additional columns, but the columns for id, time and hr values must be named as above.

```{r}
dim(example_heart_1)
str(example_heart_1)
head(example_heart_1)
```

# Summarizing Data

The ihr package provides summary of heart rate data, it returns multiple values using basic function.

```{r}
summary_hr(example_heart_1)
```

# Calculating time-dependent metrics

The ihr package have the function of calculating multiple time-dependent metrics.

## active_percent()

When a dataframe is passed, subject id will always be printed in the id column, and multiple values for a single subject will be printed in the following columns.

```{r}
active_percent(example_heart_1)
```

## episode_calculation()

This function calculates low and high heart rate episodes with summary statistics. 

```{r}
episode_calculation(example_heart_1, lv1_low = 60, lv2_low = 55, lv1_high = 85, lv2_high = 100, dur_length = 15)
```


### Parameters

#### data 
DataFrame object with column names "id", "time", and "hr". 

#### lv1_low, lv2_low, hy1_high, lv2_high
Users can set certain thresholds for the low and high heart rate by passing parameters, lv1_low, lv2_low, lv1_high, lv2_high. Level 2 indicates more extreme states than level 1 so the threshold value for the lv2_low value should be lower than lv1_low value, and the threshold for the lv2_high value should higher than lv1_high value.

#### dur_length
By setting a duration length to 15 minutes (the last parameter), the function will count the number of episodes that heart rate values go below or above the thresholds more than 15 minutes. 


### Return Value

For each single subject, it returns a dataframe including average number of episodes per day, average episode length, and average heart rate in episodes for each type and each level.



# Vizualizations

The ihr package supports two plot types described below:

| Function call | Visualization description | 
|:------------|:------------------------------|
|`plot_hr` | Time Series plot of Heart Rate | 
|`mahe`| MAHE plot displying peak and nadirs| 

## Example plot: Time series

## Examlpe plot: MAHE

# 
